add_package()

py_library(
  NAME
    indexer
  SRCS
    __init__.py
    debug.py
    utils.py
    indexer.py
    kythe.py
    output.py
  DEPS
    .callgraph
    .node_utils
    pytype.analyze
    pytype.config
    pytype.errors
    pytype.io
    pytype.libvm
    pytype.load_pytd
    pytype.utils
    pytype.ast.visitor
    pytype.pytd.pytd_defs
    pytype.pytd.pytd_for_parser
    pytype.pytd.pytd_utils
    pytype.tools.traces.traces
)

py_library(
  NAME
    node_utils
  SRCS
    node_utils.py
)

py_library(
  NAME
    parse_args
  SRCS
    parse_args.py
  DEPS
    .indexer
    pytype.config
    pytype.utils
    pytype.tools.tools
)

py_library(
  NAME
    callgraph
  SRCS
    callgraph.py
  DEPS
    pytype.pytd_lib
    pytype.pytd.pytd_for_parser
)

py_test(
  NAME
    parse_args_test
  SRCS
    parse_args_test.py
  DEPS
    .parse_args
    pytype.utils
)

py_test(
  NAME
    indexer_test
  SRCS
    indexer_test.py
  DEPS
    .indexer
    pytype.config
    pytype.libvm
    pytype.utils
    pytype.tests.test_base
)

py_test(
  NAME
    callgraph_test
  SRCS
    callgraph_test.py
  DEPS
    .indexer
    pytype.config
    pytype.utils
    pytype.tests.test_base
)

toplevel_py_binary(
  NAME
    xref
  SRCS
    main.py
  MAIN
    main.py
  DEPS
    .indexer
    .parse_args
    pytype.utils
    pytype.pytd.parse.node
)
